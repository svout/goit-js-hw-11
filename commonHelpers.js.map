{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\ndocument.getElementById('searchForm').addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    const query = document.getElementById('searchInput').value.trim();\n\n    if (query === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position:'topRight'\n            \n        });\n        return;\n    }\n\n    const apiKey = '42374416-80395e50359da313800ed9b7e';\n\n    fetch(`https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`)\n        .then(response => response.json())\n        .then(data => {\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Sorry, there are no images matching your search query. Please try again.',\n                    position: 'topRight'\n                });\n            } else {\n                document.getElementById('imageGallery').innerHTML = '';\n\n                data.hits.forEach(image => {\n                    const card = document.createElement('div');\n                    card.classList.add('card');\n\n                    const link = document.createElement('a');\n                    link.href = image.largeImageURL;\n                    link.classList.add('gallery-link'); \n\n                    const img = document.createElement('img');\n                    img.src = image.webformatURL;\n                    img.alt = image.tags;\n\n                    const details = document.createElement('div');\n                            details.classList.add('details');\n                            details.innerHTML = `\n                                <p>Likes: ${image.likes}</p>\n                                <p>Views: ${image.views}</p>\n                                <p>Comments: ${image.comments}</p>\n                                <p>Downloads: ${image.downloads}</p>\n                            `;\n\n                    link.appendChild(img);\n                    card.appendChild(link);\n                    card.appendChild(details)\n\n                    document.getElementById('imageGallery').appendChild(card);\n                });\n\n                const lightbox = new SimpleLightbox('.gallery-link'); \n                lightbox.refresh();\n            }\n        })\n        .catch(error => {\n            console.log('Error fetching data:', error);\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching data. Please try again later.',\n                position:'topRight'\n            });\n        });\n});\n\nconst galleryList = document.querySelector('.gallery');\n\nfunction createGallery(imagesArray) {\n    const galleryItems = imagesArray.map(image => {\n        const listItem = document.createElement('li');\n        listItem.classList.add('gallery-item');\n\n        const link = document.createElement('a');\n        link.classList.add('gallery-link');\n        link.href = image.original;\n\n        const imageElement = document.createElement('img');\n        imageElement.classList.add('gallery-image');\n        imageElement.src = image.preview;\n        imageElement.alt = image.description;\n        imageElement.dataset.source = image.original;\n\n        link.appendChild(imageElement);\n        listItem.appendChild(link);\n\n        return listItem;\n    });\n\n    galleryList.append(...galleryItems);\n}\n\ncreateGallery(images);\ngalleryList.addEventListener('click', onGalleryItemClick);\n\nfunction onGalleryItemClick(event) {\n    event.preventDefault();\n\n    if (event.target.nodeName !== 'IMG') {\n        return;\n    }\n\n    const largeImageURL = event.target.dataset.source;\n    const largeAlt = event.target.alt;\n\n    const instance = basicLightbox.create(`<img src=\"${largeImageURL}\" class=\"largeImage\" alt=\"${largeAlt}\">`, {\n        onShow: (instance) => {\n            const onKeyUp = (event) => {\n                if (event.code === 'Escape') {\n                    instance.close();\n                }\n            };\n\n            window.addEventListener('keyup', onKeyUp);\n            instance.__onKeyUp = onKeyUp;\n        },\n        onClose: (instance) => {\n            window.removeEventListener('keyup', instance.__onKeyUp);\n        }\n    });\n\n    instance.show();\n}\n\nconst loader = document.querySelector('.loader');\nloader.style.display = 'inline-block';\nconst script = document.createElement('script');\nscript.src = './js/pixabay-api.js';\n\nscript.onload = function() {\n  loader.style.display = 'none';\n};\ndocument.body.appendChild(script);\n"],"names":["event","query","iziToast","response","data","image","card","link","img","details","SimpleLightbox","error","galleryList","createGallery","imagesArray","galleryItems","listItem","imageElement","onGalleryItemClick","largeImageURL","largeAlt","instance","onKeyUp","loader","script"],"mappings":"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"}